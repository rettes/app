<!DOCTYPE html>
<html lang="en">

<!-- courses-grid21:00  -->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Courses Grid</title>

    <!-- Css Files -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/font-awesome.css" rel="stylesheet">
    <link href="css/flaticon.css" rel="stylesheet">
    <link href="css/slick-slider.css" rel="stylesheet">
    <link href="css/prettyphoto.css" rel="stylesheet">
    <link href="build/mediaelementplayer.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
    <link href="css/color.css" rel="stylesheet">
    <link href="css/color-two.css" rel="stylesheet">
    <link href="css/color-three.css" rel="stylesheet">
    <link href="css/color-four.css" rel="stylesheet">
    <link href="css/responsive.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body onload="loadUserInfo()">

    <!--// Main Wrapper \\-->
    <div class="wm-main-wrapper">

        <!--// Header \\-->
        <header id="wm-header" class="wm-header-one">

            <!--// TopStrip \\-->
            <div class="wm-topstrip">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12">

                            <ul class="wm-adminuser-section">
                                <li>
                                    <a id='welcome'>Hi, John Teo Tjia Ern.</a>
                                </li>
                                <li>

                                </li>
                                <li>
                                    <a href="#" class="wm-search-btn" data-toggle="modal" data-target="#ModalSearch"><i
                                            class="wmicon-search"></i></a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!--// MainHeader \\-->
            <div class="wm-main-header">
                <div class="container">
                    <div class="row">
                        <div class="col-md-3"><a href="index-2.html" class="wm-logo"><img src="images/smulogo.png"
                                    width="130px" height="50px"></a></div>
                        <div class="col-md-9">
                            <!--// Navigation \\-->
                            <nav class="navbar navbar-default">
                                <div class="navbar-header">
                                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                                        data-target="#navbar-collapse-1" aria-expanded="true">
                                        <span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                    </button>
                                </div>
                                <div class="collapse navbar-collapse" id="navbar-collapse-1">
                                    <ul class="nav navbar-nav">
                                        <li class="active">
                                            <a href="index.html">Home</a>
                                        </li>

                                        <li><a href="#">Course Openings</a>
                                            <ul class="wm-dropdown-menu">
                                                <li class="active"><a href="courses-grid.html">Courses Grid</a></li>
                                                <li><a href="courses-detail.html">Courses Detail</a></li>
                                            </ul>
                                        </li>

                                        <li>
                                            <a href="student-profile.html">Profile</a>
                                        </li>

                                        <li>
                                            <a href="student-payment.html" id="payment">Payment</a>
                                        </li>

                                        <li class="wm-megamenu-li">
                                            <a href="../login/login.html">Logout</a>
                                        </li>

                                        <li>
                                            <a href="#" class="wm-search-btn" data-toggle="modal"
                                                data-target="#ModalSearch"><i class="wmicon-search"></i></a>
                                        </li>
                                    </ul>
                                </div>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
            <!--// MainHeader \\-->

        </header>
        <!--// Header \\-->

        <!--// Mini Header \\-->
        <div class="wm-mini-header">
            <span class="wm-blue-transparent"></span>
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <div class="wm-mini-title">
                            <h1>Available Courses to TA for</h1>
                        </div>
                        <div class="wm-breadcrumb">
                            <ul>
                                <li><a href="index-2.html">Home</a></li>
                                <li><a href="index-2.html">Courses</a></li>
                                <li>Grid</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--// Mini Header \\-->

        <!--// Main Content \\-->
        <div class="wm-main-content mx-auto">
            <h3 style="display:none; text-align:center;" id="message"></h3>
            <!--// Main Section \\-->
            <div class="wm-main-section">
                <div class="container" id="form_block">

                    <aside class="col-md-8 d-none" style="float:none;margin:auto">
                        <div class="widget wm-search-course ">
                            <h3 class="wm-short-title wm-color">Add a new TA Opening</h3>
                            <form id="addCourse">
                                <ul>
                                    <li>
                                        <input type="text" id='modID' placeholder="Mod ID">
                                    </li>
                                    <li>
                                        <input type="text" id='modName' placeholder="Mod Name">
                                    </li>
                                    <li>
                                        <input type="text" id='positions' placeholder="Positions available">
                                    </li>
                                    <li>
                                        <input type="text" id='scope' placeholder="Job scope">
                                    </li>
                                    <li>
                                        <input type="text" id='school' placeholder="School">
                                    </li>
                                    <li>
                                        <input type="text" id='level' placeholder="Level">
                                    </li>
                                    <li>
                                        <input type="text" id='description' placeholder="Module description">
                                    </li>
                                    <li>

                                    </li>
                                    <li> <input type="submit" id='submit' value="Add opening"> </li>
                                </ul>
                            </form>
                        </div>

                    </aside>
                </div>
            </div>
            <!--// Main Section \\-->

        </div>
        <!--// Main Content \\-->

        <!--// Footer \\-->
        <footer id="wm-footer" class="wm-footer-one">

            <!--// FooterNewsLatter \\-->
            <div class="wm-footer-newslatter">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12">
                            <form>
                                <i class="wmicon-interface2"></i>
                                <input type="text" value="Enter your e-mail address"
                                    onblur="if(this.value == '') { this.value ='Enter your e-mail address'; }"
                                    onfocus="if(this.value =='Enter your e-mail address') { this.value = ''; }">
                                <input type="submit" value="Subscribe to our newsletter">
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!--// FooterNewsLatter \\-->

            <!--// FooterWidgets \\-->
            <div class="wm-footer-widget">
                <div class="container">
                    <div class="row">
                        <aside class="widget widget_contact_info col-md-3">
                            <a href="index-2.html" class="wm-footer-logo"><img src="images/logo-1.png" alt=""></a>
                            <ul>
                                <li><i class="wm-color wmicon-pin"></i> 195 Cooks Mine Road Espanola, NM 87532</li>
                                <li><i class="wm-color wmicon-phone"></i> +1 505-753-5656 <br> +1 505-753-4437</li>
                                <li><i class="wm-color wmicon-letter"></i> <a
                                        href="mailto:name@email.com">info@university.com</a> <a
                                        href="mailto:name@email.com">support@university.com</a></li>
                            </ul>
                            <div class="wm-footer-icons">
                                <a href="#" class="wmicon-social5"></a>
                                <a href="#" class="wmicon-social4"></a>
                                <a href="#" class="wmicon-social3"></a>
                                <a href="#" class="wmicon-vimeo"></a>
                            </div>
                        </aside>
                        <aside class="widget widget_archive col-md-2">
                            <div class="wm-footer-widget-title">
                                <h5>Quick Links</h5>
                            </div>
                            <ul>
                                <li><a href="#">Our Latest Events</a></li>
                                <li><a href="#">Our Courses</a></li>
                                <li><a href="#">About Us</a></li>
                                <li><a href="#">FAQ</a></li>
                                <li><a href="#">404 Page</a></li>
                                <li><a href="#">Gallery</a></li>
                                <li><a href="#">All Instructors</a></li>
                            </ul>
                        </aside>
                        <aside class="widget widget_twitter col-md-4">
                            <div class="wm-footer-widget-title">
                                <h5><i class="wmicon-social2"></i> @enrollcampus</h5>
                            </div>
                            <ul>
                                <li>
                                    <p>Check Youniverse - Multipurpose PSD Template @ThemeForest: <a
                                            href="#">pic.twitter.com/xcVlqJySjq</a></p>
                                    <time datetime="2008-02-14 20:00" class="wm-color">2 hrs ago</time>
                                </li>
                                <li>
                                    <p>Check out my New PSD: FashionPlus - Fashion eCommerce: <a
                                            href="#">pic.twitter.com/xc445Ghyt</a></p>
                                    <time datetime="2008-02-14 20:00" class="wm-color">4 hrs ago</time>
                                </li>
                                <li>
                                    <p>MedicAid - Medical Template @ThemeForest: <a
                                            href="#">pic.twitter.com/xcVlq542wfER</a></p>
                                    <time datetime="2008-02-14 20:00" class="wm-color">1 day ago</time>
                                </li>
                            </ul>
                        </aside>
                        <aside class="widget widget_gallery col-md-3">
                            <div class="wm-footer-widget-title">
                                <h5>Our Instructors</h5>
                            </div>
                            <ul class="gallery">
                                <li><a title="" data-rel="prettyPhoto[gallery1]"
                                        href="extra-images/widget-galleryfull-1.jpg"><img
                                            src="extra-images/widget-gallery-1.jpg" alt=""></a></li>
                                <li><a title="" data-rel="prettyPhoto[gallery1]"
                                        href="extra-images/widget-galleryfull-2.jpg"><img
                                            src="extra-images/widget-gallery-2.jpg" alt=""></a></li>
                                <li><a title="" data-rel="prettyPhoto[gallery1]"
                                        href="extra-images/widget-galleryfull-3.jpg"><img
                                            src="extra-images/widget-gallery-3.jpg" alt=""></a></li>
                                <li><a title="" data-rel="prettyPhoto[gallery1]"
                                        href="extra-images/widget-galleryfull-4.jpg"><img
                                            src="extra-images/widget-gallery-4.jpg" alt=""></a></li>
                                <li><a title="" data-rel="prettyPhoto[gallery1]"
                                        href="extra-images/widget-galleryfull-5.jpg"><img
                                            src="extra-images/widget-gallery-5.jpg" alt=""></a></li>
                                <li><a title="" data-rel="prettyPhoto[gallery1]"
                                        href="extra-images/widget-galleryfull-6.jpg"><img
                                            src="extra-images/widget-gallery-6.jpg" alt=""></a></li>
                                <li><a title="" data-rel="prettyPhoto[gallery1]"
                                        href="extra-images/widget-galleryfull-7.jpg"><img
                                            src="extra-images/widget-gallery-7.jpg" alt=""></a></li>
                                <li><a title="" data-rel="prettyPhoto[gallery1]"
                                        href="extra-images/widget-galleryfull-8.jpg"><img
                                            src="extra-images/widget-gallery-8.jpg" alt=""></a></li>
                                <li><a title="" data-rel="prettyPhoto[gallery1]"
                                        href="extra-images/widget-galleryfull-9.jpg"><img
                                            src="extra-images/widget-gallery-9.jpg" alt=""></a></li>
                            </ul>
                        </aside>
                    </div>
                </div>
            </div>
            <!--// FooterWidgets \\-->

            <!--// FooterCopyRight \\-->
            <div class="wm-copyright">
                <div class="container">
                    <div class="row">
                        <div class="col-md-6"> <span><i class="wmicon-nature"></i> Barcelona, Spain 2°F / -17°C</span>
                        </div>
                        <div class="col-md-6">
                            <p><a target="_blank" href="https://www.templateshub.net">Templates Hub</a></p>
                        </div>
                    </div>
                </div>
            </div>
            <!--// FooterCopyRight \\-->

        </footer>
        <!--// Footer \\-->

        <div class="clearfix"></div>
    </div>
    <!--// Main Wrapper \\-->

    <!-- ModalLogin Box -->
    <div class="modal fade" id="ModalLogin" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body">

                    <div class="wm-modallogin-form wm-login-popup">
                        <span class="wm-color">Login to Your Account</span>
                        <form>
                            <ul>
                                <li> <input type="text" value="Your Username"
                                        onblur="if(this.value == '') { this.value ='Your Username'; }"
                                        onfocus="if(this.value =='Your Username') { this.value = ''; }"> </li>
                                <li> <input type="password" value="password"
                                        onblur="if(this.value == '') { this.value ='password'; }"
                                        onfocus="if(this.value =='password') { this.value = ''; }"> </li>
                                <li> <a href="#" class="wm-forgot-btn">Forgot Password?</a> </li>
                                <li> <input type="submit" value="Sign In"> </li>
                            </ul>
                        </form>
                        <span class="wm-color">or try our socials</span>
                        <ul class="wm-login-social-media">
                            <li><a href="#"><i class="wmicon-social5"></i> Facebook</a></li>
                            <li class="wm-twitter-color"><a href="#"><i class="wmicon-social4"></i> twitter</a></li>
                            <li class="wm-googleplus-color"><a href="#"><i class="fa fa-google-plus-square"></i>
                                    Google+</a></li>
                        </ul>
                        <p>Not a member yet? <a href="#">Sign-up Now!</a></p>
                    </div>
                    <div class="wm-modallogin-form wm-register-popup">
                        <span class="wm-color">create Your Account today</span>
                        <form>
                            <ul>
                                <li> <input type="text" value="Your Username"
                                        onblur="if(this.value == '') { this.value ='Your Username'; }"
                                        onfocus="if(this.value =='Your Username') { this.value = ''; }"> </li>
                                <li> <input type="text" value="Your E-mail"
                                        onblur="if(this.value == '') { this.value ='Your E-mail'; }"
                                        onfocus="if(this.value =='Your E-mail') { this.value = ''; }"> </li>
                                <li> <input type="password" value="password"
                                        onblur="if(this.value == '') { this.value ='password'; }"
                                        onfocus="if(this.value =='password') { this.value = ''; }"> </li>
                                <li> <input type="text" value="Confirm Password"
                                        onblur="if(this.value == '') { this.value ='Confirm Password'; }"
                                        onfocus="if(this.value =='Confirm Password') { this.value = ''; }"> </li>
                                <li> <input type="submit" value="Create Account"> </li>
                            </ul>
                        </form>
                        <span class="wm-color">or signup with your socials:</span>
                        <ul class="wm-login-social-media">
                            <li><a href="#"><i class="wmicon-social5"></i> Facebook</a></li>
                            <li class="wm-twitter-color"><a href="#"><i class="wmicon-social4"></i> twitter</a></li>
                            <li class="wm-googleplus-color"><a href="#"><i class="fa fa-google-plus-square"></i>
                                    Google+</a></li>
                        </ul>
                        <p>Already a member? <a href="#">Sign-in Here!</a></p>
                    </div>

                </div>
            </div>
            <div class="clearfix"></div>
        </div>
    </div>
    <!-- ModalLogin Box -->

    <!-- ModalSearch Box -->
    <div class="modal fade" id="ModalSearch" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body">

                    <div class="wm-modallogin-form">
                        <span class="wm-color">Search Your KeyWord</span>
                        <form>
                            <ul>
                                <li> <input type="text" value="Keywords..."
                                        onblur="if(this.value == '') { this.value ='Keywords...'; }"
                                        onfocus="if(this.value =='Keywords...') { this.value = ''; }"> </li>
                                <li> <input type="submit" value="Search"> </li>
                            </ul>
                        </form>
                    </div>

                </div>
            </div>
            <div class="clearfix"></div>
        </div>
    </div>
    <!-- ModalSearch Box -->
    <div id="paypal-button" style="margin-left: 64%;">

        <!-- jQuery (necessary for JavaScript plugins) -->
        <script type="text/javascript" src="script/jquery.js"></script>
        <script type="text/javascript" src="script/modernizr.js"></script>
        <script type="text/javascript" src="script/bootstrap.min.js"></script>
        <script type="text/javascript" src="script/jquery.prettyphoto.js"></script>
        <script type="text/javascript" src="script/jquery.countdown.min.js"></script>
        <script type="text/javascript" src="script/fitvideo.js"></script>
        <script type="text/javascript" src="script/skills.js"></script>
        <script type="text/javascript" src="script/slick.slider.min.js"></script>
        <script type="text/javascript" src="script/waypoints-min.js"></script>
        <script type="text/javascript" src="build/mediaelement-and-player.min.js"></script>
        <script type="text/javascript" src="script/isotope.min.js"></script>
        <script type="text/javascript" src="script/jquery.nicescroll.min.js"></script>
        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js"></script>
        <script type="text/javascript" src="script/functions.js"></script>
    </div>

    <script>
        document.getElementById("submit").addEventListener("click", function (event) {
            event.preventDefault()
            validateForm()
        });

        if (localStorage.getItem("email") == null) {
            var professorEmail = window.location.search.substring(1);
            localStorage.setItem("email", professorEmail);
            console.log(professorEmail)
        } else if (professorEmail == null) {
            professorEmail = localStorage.getItem("email")
        }

        //sessionStorage.setItem("email", queryString)

        //console.log(sessionStorage.getItem("email"))

        // console.log(sessionStorage.get("schools"))

        var professorID = '';
        var professorName = '';

        function loadUserInfo() {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {

                if (xhttp.readyState == 4 && xhttp.status == 200) {
                    var item = JSON.parse(xhttp.responseText);
                    if (item['user_type'] == "professor") {
                        document.getElementById("payment").id = "addOpening"
                        document.getElementById("addOpening").innerHTML = "Add TA Opening"
                        document.getElementById("addOpening").href = "add-courses.html"
                        professorID = item['user_id']
                        sessionStorage.setItem("professorID", professorID)
                        document.getElementById("welcome").innerHTML = "Hi, " + professorID;
                        loadProfessorName(professorID)
                    }

                }
            }

            url = "http://localhost:5010/get_account_by_email/" + professorEmail
            xhttp.open("GET", url, true);
            xhttp.send();
        }

        function loadProfessorName(professorID) {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {

                if (xhttp.readyState == 4 && xhttp.status == 200) {
                    var item = JSON.parse(xhttp.responseText);
                    // console.log(item)
                    professorName = item['professors_name'];
                    sessionStorage.setItem("professorName", professorName)
                }
            }
            url = "http://localhost:5014/get_name_by_id/" + professorID
            xhttp.open("GET", url, true);
            xhttp.send();
        }

        function validateForm() {
            var error = false;
            var form = document.getElementById("addCourse");

            var course = {}

            for (let items of form) {
                if (items.id == "positions" && isNaN(items.value)) {
                    error = true
                    document.getElementById("positions").value = "";
                    document.getElementById("positions").placeholder = "Please enter a number for positions";
                } else if (items.value == "") {
                    error = true
                    let exist_text = document.getElementById(items.id).placeholder;
                    document.getElementById(items.id).placeholder = "Please enter the " + exist_text;
                } else {

                    if (items.id != "submit") {
                        course[items.id] = items.value;
                        if (items.id == "scope") {
                            course[items.id] = items.value;
                            course["name"] = professorName;
                            course["id"] = professorID;
                        }
                    }
                }
            }

            if (error != true) {

                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function () {

                    if (xhttp.readyState == 4 && xhttp.status == 200) {
                        var item = JSON.parse(xhttp.responseText);
                        document.getElementById("message").innerHTML = item;
                        document.getElementById("message").style.display = "block";

                        if (item == "Module exists") {
                            document.getElementById("message").style.color = "red";

                        } else if (item == "Module added") {
                            document.getElementById("message").style.color = "green";
                            document.getElementById("addCourse").reset();
                        }

                    }
                }

                let parameter = Object.entries(course).map(([key, val]) => `${key}=${val}`).join('&');
                url = "http://localhost:5012/add_course/" + parameter
                xhttp.open("GET", url, true);
                xhttp.send();
            }



        }


        function addCourses() {
            var course = document.getElementById("addCourse")
            console.log(course)
            // var xhttp = new XMLHttpRequest();
            // xhttp.onreadystatechange = function () {

            //     if (xhttp.readyState == 4 && xhttp.status == 200) {
            //         var item = JSON.parse(xhttp.responseText);
            //         // console.log(item)
            //         professorName = item['professors_name'];
            //         // console.log(professorName);
            //     }
            // }
            // url = "http://localhost:5012/get_name_by_id/" + professorID
            // xhttp.open("GET", url, true);
            // xhttp.send();
        }
    </script>

</body>

<!-- courses-grid21:17  -->

</html>