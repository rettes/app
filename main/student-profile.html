<!DOCTYPE html>
<html lang="en">

<!-- student-dashboard-profile21:55  -->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Student Dashboard-Profile</title>

    <!-- Css Files -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/font-awesome.css" rel="stylesheet">
    <link href="css/flaticon.css" rel="stylesheet">
    <link href="css/slick-slider.css" rel="stylesheet">
    <link href="css/prettyphoto.css" rel="stylesheet">
    <link href="build/mediaelementplayer.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
    <link href="css/color.css" rel="stylesheet">
    <link href="css/color-two.css" rel="stylesheet">
    <link href="css/color-three.css" rel="stylesheet">
    <link href="css/color-four.css" rel="stylesheet">
    <link href="css/responsive.css" rel="stylesheet">
    <style>
        .picture-logo {
            width: 64px;
            height: 80px;
        }
    </style>



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<!-- <body onload="loadStudentInfo()"> -->

<body onload="getStudent(); loadPage();">

    <!--// Main Wrapper \\-->
    <div class="wm-main-wrapper">

        <!--// Header \\-->
        <header id="wm-header" class="wm-header-one">

            <!--// TopStrip \\-->
            <div class="wm-topstrip">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12">

                            <ul class="wm-adminuser-section">
                                <li>
                                    <a id="welcome">Hi, John Teo Tjia Ern.</a>
                                </li>
                                <li>

                                </li>
                                <li>
                                    <a href="#" class="wm-search-btn" data-toggle="modal" data-target="#ModalSearch"><i
                                            class="wmicon-search"></i></a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!--// TopStrip \\-->

            <!--// MainHeader \\-->
            <div class="wm-main-header">
                <div class="container">
                    <div class="row">
                        <div class="col-md-3"><a href="index.html" class="wm-logo"><img src="images/smulogo.png"
                                    width="130px" height="50px alt=""></a></div>
                    <div class=" col-md-9">
                                <!--// Navigation \\-->
                                <nav class="navbar navbar-default">
                                    <div class="navbar-header">
                                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                                            data-target="#navbar-collapse-1" aria-expanded="true">
                                            <span class="sr-only">Toggle navigation</span>
                                            <span class="icon-bar"></span>
                                            <span class="icon-bar"></span>
                                            <span class="icon-bar"></span>
                                        </button>
                                    </div>
                                    <div class="collapse navbar-collapse" id="navbar-collapse-1">
                                        <ul class="nav navbar-nav" id="topNav">
                                            <li>
                                                <a href="index.html">Home</a>
                                            </li>

                                            <li>
                                                <a href="courses-grid.html">Course Openings</a>
                                            </li>

                                            <li>
                                                <a href="student-profile.html">Profile</a>
                                            </li>

                                            <li id="payment">
                                                <a href="student-payment.html">Payment</a>
                                            </li>

                                            <li class="wm-megamenu-li" id="logout">
                                                <a href="logout.html">Logout</a>
                                            </li>


                                        </ul>
                                    </div>
                                </nav>
                        </div>
                    </div>
                </div>
            </div>
            <!--// MainHeader \\-->

        </header>


        </header>
        <!--// Header \\-->

        <!--// Mini Header \\-->
        <div class="wm-mini-header">
            <span class="wm-blue-transparent"></span>
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <div class="wm-mini-title">
                            <h1>Student Dashboard</h1>
                        </div>
                        <div class="wm-breadcrumb">
                            <ul>
                                <li><a href="./index.html">Home</a></li>
                                <li>Profile</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--// Mini Header \\-->

        <!--// Main Content \\-->
        <div class="wm-main-content">

            <!--// Main Section \\-->
            <div class="wm-main-section">
                <div class="container">
                    <div class="row">
                        <aside class="col-md-4">
                            <div class="wm-student-dashboard-nav">
                                <div class="wm-student-nav">
                                    <!-- <figure>
										<a href="#"><img src="extra-images/students-setting-1.jpg" alt=""></a>
									</figure> -->
                                    <div class="wm-student-nav-text">
                                        <h6 id='student_name'></h6>
                                        <!-- <a id='student_image'>update image</a> -->
                                    </div>
                                    <ul>
                                        <li class="active">
                                            <a href="#">
                                                <i class="wmicon-avatar"></i>
                                                Profile Details
                                            </a>
                                        </li>
                                        <!-- <li>
											<a href="#">
												<i class="wmicon-book"></i>
												My Courses
											</a>
										</li> -->
                                        <!-- <li>
											<a href="#">
												<i class="wmicon-favorite"></i>
												Favorites
											</a>
										</li>
										<li>
											<a href="#">
												<i class="wmicon-paper"></i>
												Statement
											</a>
										</li>
										<li>
											<a href="#">
												<i class="wmicon-three"></i>
												Settings
											</a>
										</li>
										<li>
											<a href="#">
												<i class="wmicon-arrow"></i>
												Logout
											</a>
										</li> -->
                                    </ul>
                                </div>
                            </div>
                        </aside>
                        <div class="col-md-8">
                            <div class="wm-student-profile-info">
                                <div class="wm-student-dashboard-profile">
                                    <div class="wm-plane-title">
                                        <h2>About Me</h2>
                                    </div>
                                    <ul class="row">
                                        <li class="col-md-5">
                                            <div class="wm-student-profile">
                                                <a class=wm-circle-icon href="#"><i class="wmicon-web2"></i></a>

                                                <div class="wm-student-profile-text">
                                                    <span> Email:</span>
                                                    <a id='email' href="#"></a>
                                                </div>
                                            </div>
                                        </li>
                                        <li class="col-md-3">
                                            <div class="wm-student-profile">
                                                <a class=wm-circle-icon href="#"><i class="wmicon-clock2"
                                                        aria-hidden="true"></i></a>
                                                <div class="wm-student-profile-text">
                                                    <span>Year:</span>
                                                    <a id='current_year'></a>
                                                </div>
                                            </div>
                                        </li>
                                        <li class="col-md-4">
                                            <div class="wm-student-profile">
                                                <a class=wm-circle-icon href="#"><i
                                                        class="fa fa-graduation-cap"></i></a>
                                                <div class="wm-student-profile-text">
                                                    <span>Faculty:</span>
                                                    <a id='faculty' href="#"></a>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                    <!-- <p>Becoming a student requires more than a test score. To “be student” requires persistence. And passion. And a desire to give back. It doesn’t matter 	whether you’re the first in your family to attend college or you’re the latest in a long tradition of educational excellence: You stand up and you stand out.</p>								 -->
                                </div>
                                <!-- <div class="wm-profile-info">
									<div class="wm-title-full">
										<h5>More Detail Information</h5>
									</div>
									<div class="wm-article">
										<ul>
											<li class="wm-profile-info-right">
												<span>Public on campus</span>
											</li>
										</ul>
									</div>
									<div class="wm-article">
										<ul>
											<li class="wm-profile-start">
												<div class="wm-profile-detail-info">
													<h6><a href="#">Volunteer work with non-profits</a></h6>
													<span>No details have been entered.</span>
												</div>
											</li>
											<li><a href="#" class="wm-edit-icon"><i class="wmicon-tool3"></i>Edit</a></li>
											<li>
												<div class="wm-select-checkbox">
													<input id="c22" type="checkbox" name="ca">
													<label for="c22">
														<span></span>
													</label>
												</div>
											</li>
										</ul>
										<form class="wm-profile-info-search">
											<input type="text" onfocus="if(this.value =='Enter text here ...') { this.value = ''; }" onblur="if(this.value == '') { this.value ='Enter text here ...'; }" value="Enter text here ...">
										</form>
									</div>
									<div class="wm-article">
										<ul>
											<li class="wm-profile-start">
												<div class="wm-profile-detail-info">
													<h6><a href="#">Knowledge and skills</a></h6>
													<span>No details have been entered.</span>
												</div>
											</li>
											<li><a href="#" class="wm-edit-icon"><i class="wmicon-tool3"></i>Edit</a></li>
											<li>
												<div class="wm-select-checkbox">
													<input id="c23" type="checkbox" name="ca">
													<label for="c23">
														<span></span>
													</label>
												</div>
											</li>
										</ul>
									</div>
									<div class="wm-article">
										<ul>
											<li class="wm-profile-start">
												<div class="wm-profile-detail-info">
													<h6><a href="#">Languages</a></h6>
													<span>English (B2); Spanish (native)</span>
												</div>
											</li>
											<li><a href="#" class="wm-edit-icon"><i class="wmicon-tool3"></i>Edit</a></li>
											<li>
												<div class="wm-select-checkbox">
													<input id="c24" type="checkbox" name="ca">
													<label for="c24">
														<span></span>
													</label>
												</div>
											</li>
										</ul>
									</div>
								</div> -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--// Main Section \\-->

            <!--// Main Section \\-->
        </div>
        <!--// Main Content \\-->

        <!--Footer-->
        <footer id="wm-footer" class="wm-footer-one">

            <!--// FooterNewsLatter \\-->
            <div class="wm-footer-newslatter">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12">
                            <form>

                                <input type="submit" value="Copyrighted by Singapore Management University">
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!--// FooterNewsLatter \\-->

            <!--// FooterWidgets \\-->
            <div class="wm-footer-widget">
                <div class="container">
                    <div class="row">
                        <aside class="widget widget_contact_info col-md-3">
                            <a href="index.html" class="wm-footer-logo"><img src="images/smulogo.png" alt=""
                                    width="197px" height="62px"></a>
                            <ul>
                                <li><i class="wm-color wmicon-pin"></i> 81 Victoria St, Singapore 188065</li>
                                <li><i class="wm-color wmicon-phone"></i> Tel: +65 6828 0100

                                    <br> Fax: +65 6828 0101</li>
                                <li><i class="wm-color wmicon-letter"></i> <a
                                        href="mailto:enquiry@smu.edu.sg">enquiry@smu.edu.sg</a> <a></a>
                            </ul>
                            <div class="wm-footer-icons">
                                <a href="https://www.facebook.com/sgsmu" class="wmicon-social5"></a>
                                <a href="https://twitter.com/sgsmu" class="wmicon-social4"></a>
                                <a href="https://www.linkedin.com/company/singapore-management-university/"
                                    class="wmicon-social3"></a>
                            </div>
                        </aside>


                        <aside class="widget widget_gallery col-md-3">
                            <div class="wm-footer-widget-title">
                                <h5>Some of our Professors</h5>
                            </div>
                            <ul class="gallery">
                                <li><a title="" data-rel="prettyPhoto[gallery1]" href="images/aplin.jpg"><img
                                            class="picture-logo" src="images/aplin.jpg" alt=""></a></li>
                                <li><a title="" data-rel="prettyPhoto[gallery1]" href="images/benjaminjong.jpg"><img
                                            class="picture-logo" src="images/benjaminjong.jpg" alt=""></a></li>
                                <li><a title="" data-rel="prettyPhoto[gallery1]" href="images/bthuynh.jpg"><img
                                            class="picture-logo" src="images/bthuynh.jpg" alt=""></a></li>
                                <li><a title="" data-rel="prettyPhoto[gallery1]" href="images/charlescsy.jpg"><img
                                            class="picture-logo" src="images/charlescsy.jpg" alt=""></a></li>
                                <li><a title="" data-rel="prettyPhoto[gallery1]" href="images/cposkitt.jpg"><img
                                            class="picture-logo" src="images/cposkitt.jpg" alt=""></a></li>
                                <li><a title="" data-rel="prettyPhoto[gallery1]" href="images/davidlo.jpg"><img
                                            class="picture-logo" src="images/davidlo.jpg" alt=""></a></li>
                                <li><a title="" data-rel="prettyPhoto[gallery1]" href="images/lkshar.jpg"><img
                                            class="picture-logo" src="images/lkshar.jpg" alt=""></a></li>
                                <li><a title="" data-rel="prettyPhoto[gallery1]" href="images/rajesh.jpg"><img
                                            class="picture-logo" src="images/rajesh.jpg" alt=""></a></li>
                                <li><a title="" data-rel="prettyPhoto[gallery1]" href="images/rafaelbarros.jpg"><img
                                            class="picture-logo" src="images/rafaelbarros.jpg" alt=""></a></li>
                            </ul>
                        </aside>
                    </div>
                </div>
            </div>

        </footer>
        <div class="clearfix"></div>
        <!-- <script>
        function loadStudentInfo(){
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                if (xhttp.readyState == 4 && xhttp.status == 200) {
                    var item = JSON.parse(xhttp.responseText);
                    // console.log(item);
                    console.log(item.students[0].student_name);
                }

                document.getElementById("courseList").innerHTML = itemToAdd;
            }

            xhttp.open("GET", "http://localhost:5015/get_all", true);
            xhttp.send();
        }
    </script> -->

        <!-- !  my javascript code -->
        <script>
            if (userEmail == null && localStorage.getItem("email") != null) {
                var userEmail = localStorage.getItem("userEmail");
            }
            if (userID == null && localStorage.getItem("userID") != null) {
                var userID = localStorage.getItem("userID");
            }
            if (userName == null && localStorage.getItem("userName") != null) {
                var userName = localStorage.getItem("userName");
            }
            if (userType == null && localStorage.getItem("userType") != null) {
                var userType = localStorage.getItem("userType");
            }
            if (localStorage.getItem("email") == null ){
                window.location = "http://../login/index.html";
                Redirect();
            }

            var localhost_5015 = `http://240dd30e69f7.ngrok.io`;

            function loadPage() {
                document.getElementById("welcome").innerHTML = "Hi, " + userID;
                if (userType == "professor") {
                    document.getElementById("payment").id = "add"
                    var item = `
                        <a href=# >Manage</a>
                        <ul class="wm-dropdown-menu">
                            <li><a href="add-courses.html" id="addOpening">Add TA Opening</a></li>
                            <li class="active" id="taTenure"><a href="add-tenure.html">Add TA Tenure</a></li>
                            <li class="active" id="taManage"><a href="manage-applications.html">Manage Applications</a></li>
                        </ul>`;

                    document.getElementById("add").innerHTML = item
                } else if (userType == "admin") {
                    var newLi = document.createElement("LI");
                    newLi.id = "add"
                    var linkNode = document.createElement("A");
                    linkNode.innerHTML = "Manage";
                    linkNode.href = "#";
                    newLi.appendChild(linkNode);
                    var topNav = document.getElementById("topNav");
                    topNav.insertBefore(newLi, document.getElementById("logout"));

                    var item = `<ul class="wm-dropdown-menu">
                            <li><a href="add-courses.html" id="addOpening">Add TA Opening</a></li>
                            <li class="active" id="taApplications"><a href="ta-applications.html">TA Applications</a></li>
                        </ul>`;

                    document.getElementById("add").innerHTML += item

                }

                // if (userType == "professor" || userType == "admin") {
                //     console.log("This is a professor or admin");
                //     document.getElementById('output_table');
                //     getPendingApplications();
                // }

                // redirect to main page or display error 404 if its student
                // else if (userType == "student") {
                //     // var newLi = document.createElement("LI");
                //     // var linkNode = document.createElement("A");
                //     // linkNode.id = "addOpening";
                //     // linkNode.innerHTML = "Add TA Opening";
                //     // linkNode.href = "add-courses.html";
                //     // newLi.appendChild(linkNode);
                //     // console.log(newLi)

                //     // var topNav = document.getElementById("topNav");
                //     // topNav.insertBefore(newLi, document.getElementById("logout"));

                //     // newLi = document.createElement("LI");
                //     // linkNode = document.createElement("A");
                //     // linkNode.id = "taApplications";
                //     // linkNode.innerHTML = "TA Applications";
                //     // linkNode.href = "ta-applications.html";
                //     // newLi.appendChild(linkNode);
                //     // topNav.insertBefore(newLi, document.getElementById("logout"));

                //     window.location.href = "http://localhost/app/login/";
                //     Redirect();

                // }
            }


            function getStudent() {
                var url_string = window.location.href;
                var url = new URL(url_string)
                // http:localhost/app/main/student-profile.html?student_id=john.2017

                var student_id = url.searchParams.get("student_id")
                if (student_id === null) {
                    student_id = userID;
                }
                console.log('student_id: ' + student_id)
                // Step 1
                var request = new XMLHttpRequest();

                // Step 2
                // Register function
                request.onreadystatechange = function () {
                    // Step 5
                    if (this.readyState == 4 && this.status == 200) {
                        // Response is ready
                        console.log('success');
                        var json_obj = JSON.parse(request.responseText);
                        console.log(json_obj);
                        renderStudentProfile(json_obj);
                    }
                    // else if( request.readyState == 4 && request.status == 404 ) {
                    //     console.log('Fail to retrieve request')
                }

                // Step 3
                var url = `${localhost_5015}/get_name_by_id/${student_id}`;

                // var url = `http://localhost:5001/`; 
                request.open("GET", url, true);
                request.send();

                // request.open("PUT", url, true); 
                // request.setRequestHeader("Content-type", "application/x-www-form-urlencoded"); 
                // request.send("email=" + email +"&password="+password); // query parameters

            }

            function renderStudentProfile(json_obj) {
                var current_year = json_obj.current_year;
                var faculty = json_obj.faculty;
                var rating = json_obj.rating;
                // var resume = json_obj.resume;
                var student_id = json_obj.student_id;
                var student_name = json_obj.student_name;
                var email = student_id + "@smu.edu.sg"


                document.getElementById('student_name').innerText = `${student_name}`;
                // document.getElementById('rating').innerText = `${rating}`;
                // document.getElementById('student_image').innerText = `${student_name}`;
                document.getElementById('email').innerText = `${email}`;
                document.getElementById('faculty').innerText = `${faculty}`;
                document.getElementById('current_year').innerText = `${current_year}`;



            }
        </script>

        <!-- jQuery (necessary for JavaScript plugins) -->


        <script type="text/javascript" src="script/jquery.js"></script>
        <script type="text/javascript" src="script/modernizr.js"></script>
        <script type="text/javascript" src="script/bootstrap.min.js"></script>
        <script type="text/javascript" src="script/jquery.prettyphoto.js"></script>
        <script type="text/javascript" src="script/jquery.countdown.min.js"></script>
        <script type="text/javascript" src="script/fitvideo.js"></script>
        <script type="text/javascript" src="script/skills.js"></script>
        <script type="text/javascript" src="script/slick.slider.min.js"></script>
        <script type="text/javascript" src="script/waypoints-min.js"></script>
        <script type="text/javascript" src="build/mediaelement-and-player.min.js"></script>
        <script type="text/javascript" src="script/isotope.min.js"></script>
        <script type="text/javascript" src="script/jquery.nicescroll.min.js"></script>
        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js"></script>
        <script type="text/javascript" src="script/functions.js"></script>


</body>




<!-- student-dashboard-profile21:55  -->

</html>