<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body onload = "populateButtons()">
	<table>
		<tr>
			<td id = 'payment1' style="margin-left: 64%;">
			</td >
		<tr>
			<td id = 'payment2' style="margin-left: 64%;">
			</td>
		</tr>
		<tr>
			<td id = 'payment3' style="margin-left: 64%;">
			</td>
		</tr>
			
		</tr>
	</table>
    
    <script src="https://www.paypalobjects.com/api/checkout.js"></script>
	<script>

		function populateButtons(){
			var buttons = document.getElementsByTagName("tr");

			console.log(buttons.length)
			for(let i = 0; i < buttons.length; i++){
				console.log("payment" + (i+1));
				generateButton(500, "#payment" + (i+1))
			}
		}
		async function generateButton(cost, id){
			//PayPal API
			paypal.Button.render({
				// Configure environment
				env: 'sandbox',
				client: {
				sandbox: 'AUeZaD56BGfH4-z8TGcUA2H6Bqgg80VIowCG5WM3qSZAEGBkacCgoMUq5TCPa6BoS0VTqNzTCl6IlEze',
				production: 'demo_production_client_id'
				},
				// Customize button (optional)
				locale: 'en_US',
				style: {
				size: 'small',
				color: 'gold',
				shape: 'pill',
				},

				// Enable Pay Now checkout flow (optional)
				commit: true,

				// Set up a payment
				payment: function(data, actions) {
				return actions.payment.create({
					transactions: [{
					amount: {
						total: 500,
						currency: 'SGD'
					}
					}]
				});
				},

				// Execute the payment
				onAuthorize: function(data, actions) {
				return actions.payment.execute().then(function() {
					// Show a confirmation message to the buyer
					PaymentMade();
					window.location.replace("index.html");
				});
				}
			}, id);
        }
    </script>
</body>
</html>